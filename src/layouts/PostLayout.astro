---
import PageHeader from '@components/Sections/PageHeader.astro';
import { formatDate } from '@utils/dateUtils';
import { Image } from 'astro:assets';
import Icon from '@components/UI/Icon.astro';

export interface Props {
  title: string;
  description?: string;
  image?: {
    url: string;
    alt: string;
  };
  date?: Date;
  author?: string;
  tags?: string[];
}

const { title, image, date, author, tags = [] } = Astro.props;

const formattedDate = date ? formatDate(date) : null;
---

<PageHeader title={title} />

<main class='container py-8'>
  <div class='mx-auto max-w-3xl'>
    {
      image && (
        <div class='mb-8 overflow-hidden rounded-lg'>
          <Image
            src={image.url}
            alt={image.alt}
            class='object-cover w-full h-64 md:h-96'
            width={1024}
            height={600}
            widths={[320, 640, 1024]}
            format='webp'
            loading='lazy'
          />
        </div>
      )
    }

    <div class='mb-8'>
      {
        (date || author) && (
          <div class='flex flex-wrap items-center mb-4 text-sm text-gray-600'>
            {formattedDate && (
              <span class='mr-4 flex items-center'>
                <Icon name='calendar' class='w-4 h-4 mr-1' />
                {formattedDate}
              </span>
            )}
            {author && (
              <span class='flex items-center'>
                <Icon name='user' class='w-4 h-4 mr-1' />
                {author}
              </span>
            )}
          </div>
        )
      }

      {
        tags.length > 0 && (
          <div class='flex flex-wrap gap-2 mb-4'>
            {tags.map((tag) => (
              <span class='px-3 py-1 text-xs font-medium text-primary-700 bg-primary-100 rounded-full'>
                {tag}
              </span>
            ))}
          </div>
        )
      }
    </div>

    <article
      class='prose prose-lg max-w-none prose-headings:text-gray-900 prose-h1:text-3xl prose-h2:text-2xl prose-h3:text-xl prose-h4:text-lg prose-p:text-gray-700 prose-li:text-gray-700 prose-strong:text-gray-900 prose-a:text-primary-600 hover:prose-a:text-primary-700'
    >
      <slot />
    </article>
  </div>
</main>
